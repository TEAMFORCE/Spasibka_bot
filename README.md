# Бот для проекта "Цифровое спасибо"



#### Реализовано:
* **/balance, /баланс** - бот отвечает текущий баланс, при обращении в ЛС берется баланс активной организации
* **+n Необязательный комментарий** - используется при цитировании сообщения в группе с ботом, отправляет n спасибок цитируемому пользователю
* **+n @Nickname** - отправка спасибоки по нику в ТГ без цитирования сообщения
* **+n Необязательный комментарий #Тэг** - отправка спасибки с тегом (если тег указан не верно, спасибка отправится без тега)
* **/tags** - списог основных тэгов
* **/ct** - в личных сообщениях. Выводит список не проведенных транзакций. При клике на транзакцию отменяет ее
* **/go** - в личных сообщениях. Выводит список групп. При клике по группе делает ее активной.
* **/export** - отправляет в ЛС фаил .xlsx со списком транзакций по пользователю. При общении в ЛС формирует список по активной группе
* **/start , /help** - приветственное сообщение (отправляется в личку)


### Структура:
* /API/ - функции связанные с api
* /handlers/admin.py - хендлеры для админки, все проверяются по id листу админа
* /handlers/client.py - хендлеры для клиентов, все команды общего пользования
* /handlers/other.py - хендлеры общего назначения, ловят обычные сообщения по фильтрам
* /keyboards - кнопки клавиатур
* /dict_cloud/dicts - словари с сообщениями



### Точка входа:
    
    main.py

### Запуск:

**При добавлении бота в группу обязательно сделайте его администратором**

    Для запуска необходимо добавить переменные окружения:
    TOKEN_TG='токен бота'
    TOKEN_DRF=токен бота для работы с АПИ в формате "Token 'токен бота в API'"
    DRF_URL='базовый домен API'

    Также необходимо добавить файлы с соглашением об использовании и политикой конфиденциальности
    ./files/agreement.pdf
    ./files/privacy_policy.pdf

### Docker-compose
Для удобства добавлен docker-compose для запуска из контейнера
docker-compose up --build

### Установка зависимостей:

    pip install requirements.txt